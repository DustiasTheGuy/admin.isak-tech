<section>
    {{ if .Error }}
    <div class="alert alert-danger" role="alert">
        <p>{{ .Error }}</p>
    </div>
    {{ end }}

    {{ if .Success }}
        <div class="alert alert-success" role="alert">
            <p>{{ .Success }}</p>
        </div>
    {{ end }}
</section>

<section class="post-section">
    <form>
        <div class="form-group">
          <label for="title">Title</label>
          <input type="text" id="title" name="title" value="{{ .Post.Title }}">
        </div>
        <div class="form-group">
          <label for="body">Body</label>
          <textarea type="text" id="body" name="post">{{ .Post.Post }}</textarea>
        </div>
        <div class="form-group">
          <label for="imageurl">Image URL</label>
          <input type="text" id="imageurl" name="imageurl" value="{{ .Post.ImageURL }}">
        </div>
        <div class="form-group">
            <label>Category</label>
            <select id="category" name="category">
                <option value="Articles">Articles</option>
                <option value="News">News</option>
                <option value="Product Reviews">Product Reviews</option>
                <option value="Guides">Guides</option>
                <option value="Uncategorized">Uncategorized</option>
            </select>
        </div>
    
        <div class="form-group row">
            <input type="checkbox" class="form-check-input" id="archived">
            <label class="form-check-label">Archived</label>
        </div>
    
        <div class="hidden">
            <span id="post-id">{{ .Post.ID }}</span>
            <span id="archived-hidden">{{ .Post.Archived }}</span>
            <span id="post-category">{{ .Post.Category }}</span>
        </div>
    
        <div class="button-group">
            <button onclick="deletePostSubmit(this)" data-id="{{ .Post.ID }}" type="button" class="btn btn-danger">Delete</button>
            <button onclick="updatePostSubmit()" type="button" class="btn btn-primary">Save</button>
        </div>
    </form>
</section>
<script>
    (function() {
        document.getElementById('archived').checked = 
        parseInt(document.getElementById('archived-hidden').textContent) === 1 
        ? true : false;
    })();

    (function() {
        let category = document.getElementById('post-category').textContent;
        let options = document.getElementsByTagName('option');

        for(let i = 0; i < options.length; i++) {
            if(options[i].value === category) 
            return options[i].selected = true;
        }
    })();
</script>